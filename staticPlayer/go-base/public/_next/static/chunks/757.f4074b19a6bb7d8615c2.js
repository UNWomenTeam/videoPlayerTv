(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[757],{5757:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return R}});var r,u=t(5893),o=t(7294),c=t(4184),i=t.n(c),a=t(1163),f=t(1752),s=t(1664),l=t(1666),p=t.n(l),d=t(5552);function v(){return(v=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function h(e){return o.createElement("svg",v({width:21,height:20,viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 1.75a3.75 3.75 0 100 7.5 3.75 3.75 0 000-7.5zM5.25 5.5a5.25 5.25 0 1110.5 0 5.25 5.25 0 01-10.5 0zM10.5 14.75c-3.907 0-7.24 1.916-8.855 4.633a.75.75 0 01-1.29-.766C2.27 15.397 6.121 13.25 10.5 13.25c4.38 0 8.23 2.148 10.145 5.367a.75.75 0 11-1.29.766c-1.615-2.717-4.947-4.633-8.855-4.633z",fill:"#fff"})))}var m=o.memo(h),g=t(3766),b=t(9388),k=t(9226),y=t(6580);var _=(0,f.default)().publicRuntimeConfig,w=function(){var e=function(){var e=(0,o.useState)(!document.hidden),n=e[0],t=e[1],r=(0,o.useCallback)((function(){return t(!document.hidden)}),[]);return(0,o.useEffect)((function(){return document.addEventListener("visibilitychange",r),function(){return document.removeEventListener("visibilitychange",r)}}),[]),n}(),n=(0,a.useRouter)(),t=(0,k.I0)(),r=(0,o.useCallback)((function(){t((0,y.Sk)())}),[]),u=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(0,o.useRef)(e),r=(0,o.useRef)();(0,o.useEffect)((function(){t.current=e}),[e]),(0,o.useEffect)((function(){return r.current=setInterval((function(){return t.current()}),n),function(){return clearInterval(r.current)}}),[n]),(0,o.useEffect)((function(){var e=r.current;return function(){return clearInterval(e)}}),[]);var u=(0,o.useCallback)((function(){clearInterval(r.current)}),[r]),c=(0,o.useCallback)((function(){clearInterval(r.current),r.current=setInterval(t.current,n)}),[r,t,n]);return{intervalRef:r,stop:u,reset:c}}((0,o.useCallback)((function(){e&&r()}),[e]),_.USER_AUTH_CHECK_DELAY),c=(0,o.useCallback)((function(){r(),u.reset()}),[u]);return(0,o.useEffect)((function(){u.reset()}),[e]),(0,o.useEffect)((function(){return r(),n.events.on("routeChangeStart",c),function(){return n.events.off("routeChangeStart",c)}}),[]),null},O=(0,f.default)().publicRuntimeConfig,E=function(){var e=(0,g.Z)((function(e){return e.user})).auth,n=(0,a.useRouter)(),t=(0,o.useCallback)((function(){"/profile"===n.pathname?n.reload():n.push("/profile")}),[n.pathname]),r=(0,o.useMemo)((function(){return e.authorized?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.Z,{size:"medium",theme:"transparent",className:i()(p().icon,{}),svg:(0,u.jsx)(m,{}),handleClick:t}),(0,u.jsx)(w,{})]}):(0,u.jsx)(s.default,{href:"/profile",children:(0,u.jsx)("a",{className:p().link,children:"\u0412\u043e\u0439\u0442\u0438"})})}),[e.authorized]);return b.Z.toBoolean(O.USER_AUTH_DISABLED)?null:r},R=o.memo(E)},6580:function(e,n,t){"use strict";t.d(n,{_W:function(){return b},$b:function(){return k},mZ:function(){return y},gG:function(){return _},Sk:function(){return w}});var r=t(6265),u=t(809),o=t.n(u),c=t(2447),i=t(258),a=t(1752),f=t(6489),s=t(1399),l=t(9388);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var v=(0,a.default)().publicRuntimeConfig,h=function(e){return{type:s.OL,error:e instanceof Error?{message:e.message}:e}},m=function(){return{type:s.ku}},g=function(e){return{type:s.XX,payload:{data:e}}},b=function(e){return function(){var n=(0,c.Z)(o().mark((function n(t){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(m()),n.next=3,i.Z.put("".concat(v.USER_AUTH_API_URL,"/api/v1/authorizations/").concat(e.uuid,"/confirmation"),JSON.stringify({confirmation:{code:e.pin}})).then((function(e){var n,r;if(null!==(n=e.errors)&&void 0!==n&&null!==(r=n.confirmation)&&void 0!==r&&r.code)throw{code:null,message:e.errors.confirmation.code};t(g(e.user))})).catch((function(e){t(h(e))}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},k=function(e){return function(){var n=(0,c.Z)(o().mark((function n(t){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(m()),n.next=3,i.Z.post("".concat(v.USER_AUTH_API_URL,"/api/v1/oauth/").concat(e.provider),JSON.stringify((0,r.Z)({},e.provider,{code:e.code,redirect_uri:e.redirectURI}))).then((function(e){var n,r;if(null!==(n=e.errors)&&void 0!==n&&null!==(r=n.confirmation)&&void 0!==r&&r.code)throw{code:null,message:e.errors.confirmation.code};t(g(e.user))})).catch((function(e){t(h(e))}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},y=function(){return{type:s.qO}},_=function(e){return{type:s.ge,payload:d({},e)}},w=function(){return function(){var e=(0,c.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=f.parse(document.cookie).userToken1tv)){e.next=6;break}return e.next=4,i.Z.get("".concat(v.USER_AUTH_API_URL,"/api/v1/profiles"),"",{},{bearerToken:t,getRawResponse:!0}).then((function(e){var t;403===(null===(t=e.response)||void 0===t?void 0:t.status)&&n(y())})).catch((function(e){l.Z.errMessage("Check auth error. ".concat(null===e||void 0===e?void 0:e.message))}));case 4:e.next=7;break;case 6:n(y());case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}},1666:function(e){e.exports={icon:"ProfileLink_icon__1IcPV",notification:"ProfileLink_notification__MByHB",link:"ProfileLink_link__3szF8"}}}]);